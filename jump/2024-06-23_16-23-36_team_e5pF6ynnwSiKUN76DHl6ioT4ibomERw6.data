Script started on 2024-06-23 16:23:36-07:00 [COMMAND="/bin/bash" TERM="xterm-256color" TTY="/dev/pts/10" COLUMNS="80" LINES="24"]
[?2004h]0;team@femmebabe: ~[01;32mteam@femmebabe[00m:[01;34m~[00m$ sudo ascript setup
[?2004l[?2004h[?1049h[22;0;0t[1;24r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[22;34H(B[0;7m[ Reading... ](B[m[22;32H(B[0;7m[ Read 404 lines ](B[m[H(B[0;7m  GNU nano 7.2                     /usr/bin/setup                               [1;79H(B[m[23d(B[0;7m^G(B[m Help[14G(B[0;7m^O(B[m Write Out (B[0;7m^W(B[m Where Is  (B[0;7m^K(B[m Cut[53G(B[0;7m^T(B[m Execute   (B[0;7m^C(B[m Location[24d(B[0;7m^X(B[m Exit[14G(B[0;7m^R(B[m Read File (B[0;7m^\(B[m Replace   (B[0;7m^U(B[m Paste     (B[0;7m^J(B[m Justify   (B[0;7m^/(B[m Go To Line[2d[36m#!/bin/bash[3d[39m(B[mSECONDS[32m=[39m(B[m0[4d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"femmebabe installer initialized."[5d(B[0m[36m# sudo chmod a+x scripts/usersetup[6d# ./scripts/usersetup[7d# ssh-keygen[8d# Project directory[9d[39m(B[mDIR[32m=(B[0;1m[33m"/home/team/femmebabe"[10d[39m(B[mUSER[32m=(B[0;1m[33m"team"[11d(B[0m[36m# Log commands[12d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Logging commands"[13d[39m(B[msudo (B[0;1m[34mcp[39m(B[m log/commands.log /var/log/commands.log[14dsudo (B[0;1m[34mchmod[35m -R[39m(B[m a+w /var/log[15dsudo (B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[msyslog /var/log[16d(B[0;1m[34mecho[39m(B[m [32m$(B[0;1m[33m'alias venv="source /home/team/femmebabe/venv/bin/activate"'[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -[39m(B[0;7m>[17;1H(B[0;1m[34mecho[39m(B[m [32m$(B[0;1m[33m'PROMPT_COMMAND=\'RETRN_VAL=$?;logger -p local6.debug "$(whoami) [$$]: $([39m(B[0;7m>[18;1H(B[0;1m[34mecho[39m(B[m [32m$(B[0;1m[33m'PROMPT_COMMAND=\'RETRN_VAL=$?;logger -p local6.debug "$(whoami) [$$]: $([39m(B[0;7m>[19;1H(B[0;1m[34mecho[39m(B[m [32m$(B[0;1m[33m'PROMPT_COMMAND=\'RETRN_VAL=$?;logger -p local6.debug "$(whoami) [$$]: $([39m(B[0;7m>[20;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"source /etc/bashrc"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /home/team/.profile[21d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"/var/log/commands.log"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/logrotate.d/syslog[2d[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"source /etc/bashrc"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /home/team/.profile[3d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"/var/log/commands.log"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/logrotate.d/syslog[4;7H(B[0;1m[33mlocal6.*    /var/log/commands.log"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m (B[0;1m[33m"/etc/rsyslog.d/bash.con[39m(B[0;7m>[5;1H(B[msudo service rsyslog restart[K[6;3H[36mNano config[39m(B[m[K[7d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"set tabsize 4"[39m(B[m [32m>>[39m(B[m /home/(B[0;1m[31m$USER[39m(B[m/.nanorc[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"set tabstospaces"[39m(B[m [32m>>[39m(B[m /home/(B[0;1m[31m$USER[39m(B[m/.nanorc[9d[36m# Git config[39m(B[m[K[10d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Git configuration"[11d[39m(B[msudo git config(B[0;1m[35m --global[39m(B[m user.email (B[0;1m[33m"jasper.camber.holton@gmail.com"[39m(B[m [32m&&[39m(B[m sudo gi(B[0;7m>[12;1H(B[mgit config(B[0;1m[35m --global[39m(B[m user.email (B[0;1m[33m"jasper.camber.holton@gmail.com"[13d[39m(B[mgit config(B[0;1m[35m --global[39m(B[m user.name (B[0;1m[33m"Jasper Holton"[39m(B[m[K[14dgit config(B[0;1m[35m --global --add[39m(B[m safe.directory [32m$(B[0;1m[33m"$DIR"[15;6H[39m(B[mssh-keyscan(B[0;1m[35m -t[39m(B[m rsa gitlab.com [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /root/.ssh/known_hosts[16dsudo ssh-keyscan(B[0;1m[35m -t[39m(B[m rsa github.com [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /root/.ssh/known_hosts[K[17;6H(B[0;1m[33m"Mounting setup"[39m(B[m[K[18dsudo mount(B[0;1m[35m -o[39m(B[m remount,size[32m=[39m(B[m16G,[32mexec[39m(B[m /tmp[K[19d[36m# Update and install[39m(B[m[K[20;7H(B[0;1m[33mUpdate and install packages"[39m(B[m[K[21dsudo apt update [32m&&[39m(B[m sudo NEEDRESTART_MODE[32m=[39m(B[ma apt upgrade(B[0;1m[35m -y[39m(B[m[K[2d[?12l[?25h[?25l[7G(B[0;1m[33mUpdate and install packages"[39m(B[m[K[3dsudo apt update [32m&&[39m(B[m sudo NEEDRESTART_MODE[32m=[39m(B[ma apt upgrade(B[0;1m[35m -y[39m(B[m[K[4dsudo apt purge postgresql-client-14 postgresql-client-common postgresql-common [5d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"postfix postfix/mailname string femmebabe.com"[39m(B[m [32m|[39m(B[m sudo debconf-(B[0;1m[34mset[39m(B[m-selecti(B[0;7m>[6;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"postfix postfix/main_mailer_type string 'Internet Site'"[39m(B[m [32m|[39m(B[m sudo debconf-(B[0;1m[34ms[39m(B[0;7m>[7;1H(B[msudo NEEDRESTART_MODE[32m=[39m(B[ma DEBIAN_FRONTEND[32m=[39m(B[mnoninteractive apt (B[0;1m[34minstall[35m -y[39m(B[m postfix[8dsudo NEEDRESTART_MODE[32m=[39m(B[ma apt (B[0;1m[34minstall[35m -y[39m(B[m rkhunter clamav-daemon libx264-dev ffmpe(B[0;7m>[9;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"-a exit,always -F arch=b64 -F euid=0 -S execve"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/audit/(B[0;7m>[10;7H(B[0;1m[33m-a exit,always -F arch=b32 -F euid=0 -S execve"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/audit/(B[0;7m>[11;1H(B[0m[36m# Enable ClamAV antivirus[39m(B[m[K[12d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Starting antivirus"[39m(B[m[K[13dsudo systemctl enable clamav-daemon[K[14dsudo systemctl start clamav-daemon[K[15d[36m# Set hostname[39m(B[m[K[16d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"127.0.0.1 femmebabe"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/hosts[K[17dsudo hostnamectl (B[0;1m[34mset[39m(B[m-hostname localhost[18d[36m# Setup postgres[39m(B[m[K[19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Postgres setup"[20d[39m(B[msudo(B[0;1m[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"DROP DATABASE database;"[21;5H[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"CREATE DATABASE database;"[2d[39m(B[m[?12l[?25h[?25lsudo(B[0;1m[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"DROP DATABASE database;"[3;5H[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"CREATE DATABASE database;"[4;5H[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"CREATE USER django WITH PASSWORD 'passwor[5d[39m(B[msudo(B[0;1m[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"ALTER ROLE django SET client_encoding TO [6d[39m(B[msudo(B[0;1m[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"ALTER ROLE django SET default_transaction[7;5H[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"ALTER ROLE django SET timezone TO 'UTC';"[8;5H[35m -u[39m(B[m postgres psql(B[0;1m[35m -U[39m(B[m postgres(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"GRANT ALL PRIVILEGES ON DATABASE database[9d(B[0m[36m# Setup database backup[39m(B[m[K[10;7H(B[0;1m[33mBuilding database from backup, this may take a while."[39m(B[m[K[11d(B[0;1m[34mcat[39m(B[m db.json.?? [32m>[39m(B[m db.json[K[12;7H(B[0;1m[33mConfiguring firewall"[13;6H[39m(B[mufw default allow outgoing[K[14;6Hufw default deny incoming[K[15dsudo ufw allow 22[16dsudo ufw allow http[K[17;6Hufw allow https[K[18dsudo ufw allow (B[0;1m[33m'Postfix'[19d[39m(B[msudo ufw allow (B[0;1m[33m'Postfix SMTPS'[20;5H[39m(B[m ufw allow (B[0;1m[33m'Postfix Submission'[39m(B[m[K[21;5H ufw allow (B[0;1m[33m'Dovecot POP3'[39m(B[m[K[2d[?12l[?25h[?25l[4;17r[17;1H[3S[1;24r[2;5H ufw allow (B[0;1m[33m'Postfix Submission'[39m(B[m[K[3;5H ufw allow (B[0;1m[33m'Dovecot POP3'[39m(B[m[K[4;5H ufw allow (B[0;1m[33m'Dovecot Secure POP3'[39m(B[m[K[5;5H ufw allow 110/tcp[K[6dsudo ufw allow 25/tcp[K[7;7H(B[0;1m[33my"[39m(B[m [32m|[39m(B[m sudo ufw enable[K[8d[36m# Disable iptables[39m(B[m[K[10;6Hiptables(B[0;1m[35m -P[39m(B[m INPUT ACCEPT[K[11;6Hiptables(B[0;1m[35m -P[39m(B[m OUTPUT ACCEPT[12;6Hiptables(B[0;1m[35m -P[39m(B[m FORWARD ACCEPT[13;6Hiptables(B[0;1m[35m -F[39m(B[m[K[14;6Hiptables-save[K[15d[36m# Install BitDefender[16d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[17d[34mecho[39m(B[m (B[0;1m[33m"Runnning BitDefender antivirus installer"[18d[39m(B[mwget https[32m:[39m(B[m//cloud.gravityzone.bitdefender.com/Packages/NIX/0/7aTSsy/setup_down(B[0;7m>[19;1H(B[0;1m[34mmkdir[39m(B[m bitdefender[K[20d(B[0;1m[34mtar[39m(B[m -xf setup_downloader.tar(B[0;1m[35m -C[39m(B[m bitdefender[21;6H(B[0;1m[34mrm[39m(B[m setup_downloader.tar(B[m[K[2d[?12l[?25h[?25l(B[0;1m[34mtar[39m(B[m -xf setup_downloader.tar(B[0;1m[35m -C[39m(B[m bitdefender[3;6H(B[0;1m[34mrm[39m(B[m setup_downloader.tar(B[m[K[4d(B[0;1m[34msed[35m -i -e[39m(B[m (B[0;1m[33m's/{LOGINPASSWD/z&A*3BPd_qBGUMs/g'[39m(B[m bitdefender/installer[5;6H(B[0;1m[34mchmod[39m(B[m a+x bitdefender/installer[6;6H./bitdefender/installer[7d[36m# Setup postfix[39m(B[m[K[8d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[9d(B[0;1m[33mMail services configuration"[10;6H[34mcp[39m(B[m /etc/postfix/main.cf /etc/postfix/main.cf.backup[11;6H(B[0;1m[34mcp[39m(B[m config/etc_postfix_main.cf /etc/postfix/main.cf[12;6H(B[0;1m[34mcp[39m(B[m config/etc_postfix_master.cf /etc/postfix/master.cf[13;6H(B[0;1m[34mcp[39m(B[m config/etc_default_opendkim /etc/default/opendkim[14;6H(B[0;1m[34mcp[39m(B[m config/etc_dovecot_conf.d_10-auth.conf /etc/dovecot/conf.d/10-auth.conf[15dsudo (B[0;1m[34mcp[39m(B[m config/etc_dovecot_conf.d_10-master.conf /etc/dovecot/conf.d/10-master.(B[0;7m>[16;1H(B[msudo (B[0;1m[34mcp[39m(B[m config/etc_dovecot_dovecot.conf /etc/dovecot/dovecot.conf[17dsudo (B[0;1m[34mcp[39m(B[m config/etc_dovecot_passwd /etc/dovecot/passwd[18dsudo (B[0;1m[34mcp[39m(B[m config/etc_opendkim.conf /etc/opendkim.conf[K[19dsudo (B[0;1m[34mcp[39m(B[m config/etc_default_opendkim /etc/default/opendkim[20dsudo adduser postfix opendkim[K[21;6H(B[0;1m[34mmkdir[39m(B[m /etc/opendkim[K[2d[?12l[?25h[?25lsudo adduser postfix opendkim[K[3;6H(B[0;1m[34mmkdir[39m(B[m /etc/opendkim[K[4dsudo (B[0;1m[34mmkdir[39m(B[m /etc/opendkim/keys[K[5;6H(B[0;1m[34mmkdir[39m(B[m /etc/opendkim/keys/femmebabe.com[6;6H(B[0;1m[34mmkdir[39m(B[m /var/spool/postfix/opendkim[7dsudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"*@femmebabe.com     sendonly._domainkey.femmebabe.com"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[0;7m>[8;1H(B[msudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"sendonly._domainkey.femmebabe.com    femmebabe.com:sendonly:/etc/ope[39m(B[0;7m>[9;1H(B[msudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"127.0.0.1"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[10;6H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"localhost"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[11;6H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m""[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[K[12;6H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"*.femmebabe.com"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[13;7H(B[0;1m[34mhown[35m -R[39m(B[m opendkim[32m:[39m(B[mopendkim /etc[12P[14;6Hopendkim-genkey(B[0;1m[35m -b[39m(B[m 2048(B[0;1m[35m -d[39m(B[m femmebabe.com(B[0;1m[35m -D[39m(B[m /etc/opendkim/keys/femmebabe.c(B[0;7m>[15;7H(B[0;1m[34mhmod[39m(B[m go-rw /etc/opendkim/keys[K[16;7H(B[0;1m[34mhown[39m(B[m opendkim[32m:[39m(B[mopendkim /etc/opendkim/keys/femmebabe.com/sendonly.private[17;7H(B[0;1m[34mhown[39m(B[m opendkim[32m:[39m(B[mpostfix /var/spool/postfix/opendkim[18d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[19d mailbox/* /var/mail/[K[20;6H(B[0;1m[34mchown[39m(B[m [32m:[39m(B[musers /var/mail/*[21;6H(B[0;1m[34mchmod[35m -R[39m(B[m a+rwx /var/mail/*[2d[?12l[?25h[?25l[6G(B[0;1m[34mchown[39m(B[m [32m:[39m(B[musers /var/mail/*[3;6H(B[0;1m[34mchmod[35m -R[39m(B[m a+rwx /var/mail/*[4;6Hsystemctl restart opendkim postfix dovecot[5d[36m# Create dirs[39m(B[m[K[6d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[7d(B[0;1m[34mmkdir[39m(B[m media/audio[K[8d(B[0;1m[34mmkdir[39m(B[m media/audio/fingerprints[K[9d(B[0;1m[34mmkdir[39m(B[m media/security[K[10d(B[0;1m[34mmkdir[39m(B[m media/secure[K[11d(B[0;1m[34mmkdir[39m(B[m media/secure/media[K[12d(B[0;1m[34mmkdir[39m(B[m media/secure/video[K[13d(B[0;1m[34mmkdir[39m(B[m media/secure/profile[K[14d(B[0;1m[34mmkdir[39m(B[m media/secure/face[K[15d(B[0;1m[34mmkdir[39m(B[m media/images[K[16d(B[0;1m[34mmkdir[39m(B[m media/live[K[17d(B[0;1m[34mmkdir[39m(B[m media/live/files[K[18d(B[0;1m[34mmkdir[39m(B[m media/live/stills[19d(B[0;1m[34mmkdir[39m(B[m media/files[K[20d(B[0;1m[34mmkdir[39m(B[m temp[K[21d(B[0;1m[34mmkdir[39m(B[m temp/data[K[2d[?12l[?25h[?25l(B[0;1m[34mmkdir[39m(B[m temp[K[3d(B[0;1m[34mmkdir[39m(B[m temp/data[K[4d(B[0;1m[34mmkdir[39m(B[m temp/gfpgan[K[5d(B[0;1m[34mmkdir[39m(B[m mail/inbox[6d(B[0;1m[34mmkdir[39m(B[m mailbox[7d[36m# Setup virtualenv[8d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Creating virtual environment"[10d[39m(B[mpython(B[0;1m[35m -m[39m(B[m venv venv[11dsource venv/bin/activate[12d[36m# Get and build dependencies[13d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Getting and building dependencies, this may take a whike"[14d[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[15dgit clone https[32m:[39m(B[m//github.com/sukhitashvili/violence-detection.git[16d(B[0;1m[34mcp[39m(B[m config/vd-requirements.txt violence-detection/requirements.txt[17d(B[0;1m[34mcp[39m(B[m config/vd-model.py violence-detection/model.py[18d(B[0;1m[34mcd[39m(B[m violence-detection[K[19dpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[20d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[21dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[2;1H(B[m[?12l[?25h[?25l(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[3dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[4;1H(B[mgit clone https[32m:[39m(B[m//github.com/TencentARC/GFPGAN.git[5dgit clone https[32m:[39m(B[m//github.com/davisking/dlib.git[6dsudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m curl gnupg[7dcurl https[32m:[39m(B[m//repo.sshlog.com/sshlog-ubuntu/public.gpg [32m|[39m(B[m sudo gpg(B[0;1m[35m --yes --dearmo[39m(B[0;7m>[8;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"deb [arch=any signed-by=/usr/share/keyrings/repo-sshlog-ubuntu.gpg] https[39m(B[0;7m>[9;1H(B[msudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m sshlog[10d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[11d(B[0;1m[34mcd[39m(B[m dlib[K[12d(B[0;1m[34mmkdir[39m(B[m build[32m;[39m(B[m (B[0;1m[34mcd[39m(B[m build[32m;[39m(B[m cmake ..[32m;[39m(B[m cmake(B[0;1m[35m --build[39m(B[m .[13d(B[0;1m[34mcd[39m(B[m ..[K[14dsource venv/bin/activate[15dpython setup.py (B[0;1m[34minstall[39m(B[m[K[16;2H(B[0;1m[34md[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[17dsource venv/bin/activate[K[18;4H(B[0;1m[31m$DIR[39m(B[m/GFPGAN/[K[19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing python dependencies"[20d[39m(B[mpip (B[0;1m[34minstall[39m(B[m basicsr[21dpip (B[0;1m[34minstall[39m(B[m facexlib[K[2d[?12l[?25h[?25lpip (B[0;1m[34minstall[39m(B[m basicsr[3dpip (B[0;1m[34minstall[39m(B[m facexlib[K[4dpip (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[K[5dpython setup.py develop[K[6dpip (B[0;1m[34minstall[39m(B[m realesrgan[K[7d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[8dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers gfpgan[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing ta-lib"[39m(B[m[K[10dwget https[32m:[39m(B[m//prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar(B[m.gz[11d(B[0;1m[34mtar[39m(B[m xvzf ta-lib-0.4.0-src.tar(B[m.gz[12dsudo (B[0;1m[34mrm[39m(B[m ta-lib-*[K[13;4Hta-lib[14dsudo ./configure[K[15dsudo (B[0;1m[34mmake[39m(B[m[K[16dsudo (B[0;1m[34mmake[39m(B[m (B[0;1m[34minstall[17d(B[0m[36m# Set firewall rules[39m(B[m[K[18;8H[K[19d[36m# Install pypi dependencies[39m(B[m[K[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[21d[39m(B[msudo systemctl mask tmp.mount[2d[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[3d[39m(B[msudo systemctl mask tmp.mount[4d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[5dsource venv/bin/activate[6;4H3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m"celery[redis]"[7d[39m(B[mpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt(B[0;1m[35m --use-deprecated(B[0m[32m=[39m(B[mlegacy-resolver(B[0;1m[35m --use[39m(B[m-pep517[8dpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python[36m #==4.5.4.60[9d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-contrib-python[36m #==4.5.4.60[10d#pip install opencv-python==4.5.5.64[39m(B[m[K[11d[36m#pip install opencv-contrib-python==4.5.5.64[12d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python-headless[13dpip3 uninstall channels[14dpip3 uninstall daphne[15dpip3 (B[0;1m[34minstall[39m(B[m channels[32m[(B[0;1m[33m"daphne"(B[0m[32m][16d[39m(B[mpip3 (B[0;1m[34minstall[39m(B[m Pillow[32m==[39m(B[m9.5.0[17dpip3 (B[0;1m[34minstall[39m(B[m librosa[18dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m'Twisted[tls,http2]'[19d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m certifi requests urllib3 numpy oauthlib twisted pyjwt sq(B[0;7m>[20;1H(B[mpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[21d[36m# Install certbot[39m(B[m[K[2d[?12l[?25h[?25lpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[3d[36m# Install certbot[39m(B[m[K[4d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[5;2H[39m(B[mudo snap (B[0;1m[34minstall[39m(B[m core[32m;[39m(B[m sudo snap refresh core[6dsudo snap (B[0;1m[34minstall[35m --classic[39m(B[m certbot[7dsudo (B[0;1m[34mln[35m -s[39m(B[m /snap/bin/certbot /usr/bin/certbot[K[8dsudo snap (B[0;1m[34minstall[39m(B[m redis[K[9dsudo systemctl enable apache2[K[10dsudo systemctl start apache2[K[11;2H[36m Run certbot[39m(B[m[K[12dsudo certbot(B[0;1m[35m --apache --non-interactive --agree-tos --domains[39m(B[m femmebabe.com(B[0;1m[35m --e[39m(B[0;7m>[13;1H(B[0m[36m# Reload mail server[39m(B[m[K[14dsudo systemctl restart opendkim postfix dovecot[15d[36m# Copy certs[39m(B[m[K[16d[36m#sudo cp /etc/letsencrypt/live/femmebabe.com/privkey.pem privkey.pem[17d#sudo cp /etc/letsencrypt/live/femmebabe.com/cert.pem cert.pem[18d# Patch venv[39m(B[m[K[19d(B[0;1m[34mcp[39m(B[m scripts/content.py /home/team/femmebabe/venv/lib/python3.10/site-packages/py[20d(B[0;1m[34mcp[39m(B[m scripts/pwa_webpush_forms.py /home/team/femmebabe/venv/lib/python3.10/site-p(B[0;7m>[21;1H(B[0;1m[34mcp[39m(B[m scripts/webauth_views.py /home/team/femmebabe/venv/lib/python3.10/site-packa(B[0;7m>[2;1H(B[m[?12l[?25h[?25l(B[0;1m[34mcp[39m(B[m scripts/pwa_webpush_forms.py /home/team/femmebabe/venv/lib/python3.10/site-p(B[0;7m>[3;1H(B[0;1m[34mcp[39m(B[m scripts/webauth_views.py /home/team/femmebabe/venv/lib/python3.10/site-packa(B[0;7m>[4;1H(B[0;1m[34mcp[39m(B[m scripts/json.py venv/lib/python3.10/site-packages/django/core/serializers/js(B[0;7m>[5;1H(B[0m[36m# Set user settings[39m(B[m[K[6;6Hgpasswd(B[0;1m[35m -a[39m(B[m www-data users[K[7d[36m# Set permissions[39m(B[m[K[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setting permissions"[9;6H[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers cache/[10;6H(B[0;1m[34mchmod[39m(B[m a+rwx(B[0;1m[35m -R[39m(B[m cache/[K[11;2H[36msudo chown -R team:users /var/run/[12d#sudo chown root:root /run/sudo/ts -R[39m(B[m[K[13dsudo (B[0;1m[34mchown[35m -R[39m(B[m redis[32m:[39m(B[mredis /var/lib/redis[14;6H(B[0;1m[34mchown[35m -R[39m(B[m redis[32m:[39m(B[mredis /var/log/redis[K[15dsudo (B[0;1m[34mchmod[35m -R[39m(B[m u+rwX,g+rwX,u+rx /var/log/redis[16dsudo (B[0;1m[34mchmod[39m(B[m +r /etc/redis/redis.conf[K[17dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers /var/log/[K[18dsudo (B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[musers .././[19dsudo (B[0;1m[34mchmod[35m -R[39m(B[m g+rwX ./[K[20dsudo (B[0;1m[34mchmod[35m -R[39m(B[m g+rX .././[K[21dsudo (B[0;1m[34mchmod[35m -R[39m(B[m g-rwX ../.ssh[K[2d[?12l[?25h[?25lsudo (B[0;1m[34mchmod[35m -R[39m(B[m g+rX .././[K[3dsudo (B[0;1m[34mchmod[35m -R[39m(B[m g-rwX ../.ssh[K[4dsudo (B[0;1m[34mchmod[39m(B[m 774 ./[K[5;2H[36msudo chmod 664 db.sqlite3[6d#sudo chown www-data:users db.sqlite3[7d[39m(B[msudo (B[0;1m[34mchown[35m -R[39m(B[m www-data[32m:[39m(B[mwww-data media/[8dsudo (B[0;1m[34mchown[39m(B[m www-data[32m:[39m(B[musers ./[9;26Hmedia[10;8H(B[0;1m[34mown[35m -R[39m(B[m team[32m:[39m(B[musers ./[11dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers ./gfpgan/[K[12dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers ./temp/[K[13;8H(B[0;1m[34mmod[39m(B[m a+r team /var/mail/(B[0;1m[31m$USER[39m(B[m[K[14d[36m# Copy config and set permissions[39m(B[m[K[15d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Configuring remaining services"[39m(B[m[K[16;7H(B[0;1m[34mp[39m(B[m config/apis.json /etc/apis.json[17;7H(B[0;1m[34mp[39m(B[m config/config.json /etc/config.json[18;7H(B[0;1m[34mp[39m(B[m config/femmebabe[32m-le[39m(B[m-ssl.conf /etc/apache2/sites-available/femmebabe[32m-le[39m(B[m-(B[0;7m>[19;7H(B[0;1m[34mp[39m(B[m config/etc_dovecot_passwd /etc/dovecot/passwd[20;7H(B[0;1m[34mp[39m(B[m config/etc_init.d_celery /etc/init.d/celery[21;7H(B[0;1m[34mp[39m(B[m config/etc_init.d_celerybeat /etc/init.d/celerybeat[2d[?12l[?25h[?25l[7G(B[0;1m[34mp[39m(B[m config/etc_init.d_celery /etc/init.d/celery[3;7H(B[0;1m[34mp[39m(B[m config/etc_init.d_celerybeat /etc/init.d/celerybeat[4;7H(B[0;1m[34mp[39m(B[m config/etc_default_celerybeat /etc/default/celerybeat[5dsudo (B[0;1m[34mcp[39m(B[m config/etc_default_celery /etc/default/celery[6dsudo (B[0;1m[34mcp[39m(B[m config/etc_systemd_system_daphne.service /etc/systemd/system/daphne.ser(B[0;7m>[7;7H(B[0;1m[34mp[39m(B[m config/etc_systemd_system_celery.service /etc/systemd/system/celery.ser(B[0;7m>[8;7H(B[0;1m[34mp[39m(B[m config/etc_systemd_system_celerybeat.service /etc/systemd/system/celery(B[0;7m>[9;8H(B[0;1m[34mmod[39m(B[m a+x /etc/init.d/celery[10;8H(B[0;1m[34mmod[39m(B[m a+x /etc/init.d/celerybeat[11d[36m# Setup database[39m(B[m[K[12d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Running migrations, this should be quick"[13d[39m(B[mpython manage.py makemigrations[K[14dpython manage.py migrate(B[0;1m[35m --run-syncdb[15;7H[33mLoading data, this may take a while"[16d[39m(B[mpython manage.py loaddata db.json[K[17d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setup crontab/sudoers configuration"[39m(B[m[K[18;6Hcrontab(B[0;1m[35m -l -u[39m(B[m root [32m|[39m(B[m (B[0;1m[34mcat[39m(B[m - config/crontab [32m|[39m(B[m sudo crontab(B[0;1m[35m -u[39m(B[m root -[K[19;6Hsh(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"cat config/sudoers >> /etc/sudoers"[39m(B[m[K[20d[36m# Inject pam config and remove faulty ssh config[39m(B[m[K[21d[36m#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/pam.d/sshd[39m(B[m[K[2d[?12l[?25h[?25l[36m# Inject pam config and remove faulty ssh config[39m(B[m[K[3d[36m#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/pam.d/sshd[39m(B[m[K[4d[36m#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/profile[39m(B[m[K[5d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"session required pam_exec.so seteuid /home/team/femmebabe/pam.sh"[39m(B[m [32m|[39m(B[m sudo (B[0;7m>[6;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"session required pam_exec.so seteuid /home/team/femmebabe/logout.sh"[39m(B[m [32m|[39m(B[m su[7;7H(B[0;1m[34mhmod[39m(B[m a+x pam.sh[K[8;6H(B[0;1m[34mrm[39m(B[m /etc/ssh/sshd_config.d/50-cloud-init.conf[K[9d[36m# Copy bin scripts and set permissions[10d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Copying scripts"[39m(B[m[K[11dsudo (B[0;1m[34mcp[39m(B[m scripts/reload /usr/bin/[12dsudo (B[0;1m[34mcp[39m(B[m scripts/check /usr/bin/[K[13dsudo (B[0;1m[34mcp[39m(B[m scripts/enagpu /usr/bin/[14dsudo (B[0;1m[34mcp[39m(B[m scripts/disgpu /usr/bin/[K[15dsudo (B[0;1m[34mcp[39m(B[m scripts/activate /usr/bin/[K[16dsudo (B[0;1m[34mcp[39m(B[m scripts/backup /usr/bin/[K[17dsudo (B[0;1m[34mcp[39m(B[m scripts/ascript /usr/bin/[K[18;6H(B[0;1m[34mcp[39m(B[m scripts/setup /usr/bin/[K[19;6H(B[0;1m[34mcp[39m(B[m scripts/addsetup /usr/bin/[K[20dsudo (B[0;1m[34mcp[39m(B[m scripts/watchlogs /usr/bin/[K[21dsudo (B[0;1m[34mcp[39m(B[m scripts/logs /usr/bin/[K[2d[?12l[?25h[?25lsudo (B[0;1m[34mcp[39m(B[m scripts/watchlogs /usr/bin/[K[3dsudo (B[0;1m[34mcp[39m(B[m scripts/logs /usr/bin/[K[4dsudo (B[0;1m[34mcp[39m(B[m scripts/cmds /usr/bin/[K[5dsudo (B[0;1m[34mcp[39m(B[m scripts/setup /usr/bin/[K[6dsudo (B[0;1m[34mcp[39m(B[m scripts/pushweb /usr/bin/[K[7;7H(B[0;1m[34mp[39m(B[m scripts/purgecache /usr/bin/[8;6H(B[0;1m[34mcp[39m(B[m scripts/logssh /usr/bin/[K[9dsudo (B[0;1m[34mcp[39m(B[m config/banner /etc/banner[K[10d(B[0;1m[34mcd[39m(B[m /usr/bin/[K[11;7H(B[0;1m[34mhmod[39m(B[m a+x activate[K[12;7H(B[0;1m[34mhmod[39m(B[m a+x backup[K[13;7H(B[0;1m[34mhmod[39m(B[m a+x ascript[K[14d[36m# Reload and enable services[39m(B[m[K[15d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Enabling services"[39m(B[m[K[16;6Hsystemctl daemon-reload[K[17;6Hsystemctl enable daphne.service[18;6Hsystemctl enable celery.service[19;6Hsystemctl enable celerybeat.service[20;6Hsystemctl enable clamav-daemon[21;6Hsystemctl start daphne.service[2d[?12l[?25h[?25l[6Gsystemctl enable clamav-daemon[3;6Hsystemctl start daphne.service[4;6Hsystemctl start celery.service[5;6Hsystemctl start celerybeat.service[6;6Hsystemctl start clamav-daemon[7d[36m# Enable apache modules[39m(B[m[K[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Enabling apache2"[39m(B[m[K[9;6Ha2enmod rewrite[K[10dsudo a2enmod wsgi[11;6Ha2enmod headers[K[12;6Ha2enmod ssl[K[13;6Ha2enmod proxy[K[14dsudo a2enmod proxy_balancer[K[15dsudo a2enmod proxy_http[K[16;6Ha2enmod proxy_wstunnel[K[17d[36m#sudo a2dismod mpm_event[39m(B[m[K[18d[36m#sudo a2dismod mpm_worker[39m(B[m[K[19d[36m#sudo a2enmod mpm_prefork[39m(B[m[K[20d[36m# Disable default site[39m(B[m[K[21;6Ha2dissite 000-default[K[2d[?12l[?25h[?25l[36m# Disable default site[39m(B[m[K[3;6Ha2dissite 000-default[K[4;6Ha2dissite 000-default[32m-le[39m(B[m-ssl[K[5d[36m# Enable our site[39m(B[m[K[6;6Ha2ensite femmebabe[32m-le[39m(B[m-ssl[K[7;3H[36mReload daemon and restart apache, postfix and opendkim[8d[39m(B[msudo systemctl daemon-reload[9;6Hsystemctl restart apache2[10;6Hsystemctl restart opendkim postfix[11;6Hsystemctl start daphne[12d[36m# Set permissions[13;6H(B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[mwww-data /var/www/[14;6H(B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[mwww-data /var/www/.deepface[15d[36m# Swap configuration[39m(B[m[K[16d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Allocating swap, this may take a while"[17d[39m(B[msudo swapoff /swapfile[K[18dsudo (B[0;1m[34mrm[39m(B[m /swapfile[K[19dsudo fallocate(B[0;1m[35m -l[39m(B[m 8G /swapfile[20dsudo dd [32mif=[39m(B[m/dev/zero of[32m=[39m(B[m/swapfile bs[32m=[39m(B[m1024 count[32m=[39m(B[m8388608[21;6H(B[0;1m[34mchmod[39m(B[m 600 /swapfile[K[2d[?12l[?25h[?25lsudo dd [32mif=[39m(B[m/dev/zero of[32m=[39m(B[m/swapfile bs[32m=[39m(B[m1024 count[32m=[39m(B[m8388608[3;6H(B[0;1m[34mchmod[39m(B[m 600 /swapfile[K[4;6Hmkswap /swapfile[K[5dsudo swapon /swapfile[6d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"/swapfile swap swap defaults 0 0"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/fstab[7dsudo swapon(B[0;1m[35m --show[39m(B[m[K[8d[36m# Init caption engine[39m(B[m[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Initializing routine caption"[10d[39m(B[m/home/team/femmebabe/venv/bin/python /home/team/femmebabe/routine_caption.py[11d/home/team/femmebabe/venv/bin/python /home/team/femmebabe/setup_mail.py[12;6H[36mup git[39m(B[m[K[13d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setting up git"[39m(B[m[K[14d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[15dsudo (B[0;1m[34mrm[35m -r[39m(B[m .git[K[16dgit init(B[0;1m[35m --initial-branch(B[0m[32m=[39m(B[mmain[K[17d[36m#echo (B[0;1m[33m"Setting user password"[18d(B[0m[36m#sudo usermod --password $(echo team | openssl passwd -1 -stdin) team[19d# Show ipv6 and opendkim for domain configuration[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"COPY the below information to domain configuration."[21d[39m(B[mhostname(B[0;1m[35m -I[39m(B[m[K[22d[K[2d[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"COPY the below information to domain configuration."[3d[39m(B[mhostname(B[0;1m[35m -I[39m(B[m[K[4dip a [32m|[39m(B[m (B[0;1m[34mgrep[39m(B[m inet[K[5dip -6 addr [32m|[39m(B[m (B[0;1m[34mgrep[39m(B[m (B[0;1m[33m"scope link"[6d[39m(B[msudo (B[0;1m[34mcat[39m(B[m /etc/opendkim/keys/femmebabe.com/sendonly.txt [32m|[39m(B[m tr(B[0;1m[35m -d[39m(B[m (B[0;1m[33m'\n'[39m(B[m [32m|[39m(B[m (B[0;1m[34msed[39m(B[m (B[0;1m[33m's/\s[39m(B[0;7m>[7;1H(B[0m[36m# Setup completed[39m(B[m[K[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setup completed in"[9d[39m(B[mwc(B[0;1m[35m -l[39m(B[m scripts/setup[K[10d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"lines of code."[39m(B[m[K[11d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Total time:"[39m(B[m[K[12dduration[32m=(B[0;1m[31m$SECONDS[13;7H[33m$((duration / 60)) minutes and $((duration % 60)) seconds elapsed."[14d[34mecho[39m(B[m (B[0;1m[33m"TODO:"[15d[34mecho[39m(B[m (B[0;1m[33m"- COPY above IPv6 address to domain DNS configuration"[16d[34mecho[39m(B[m (B[0;1m[33m"- COPY domain key to domain DNS configuration"[17d[34mecho[39m(B[m (B[0;1m[33m"- ADD new git repository with git remote add originlab <repo>."[18d[34mecho[39m(B[m (B[0;1m[33m"- OPEN port 25"[39m(B[m[K[19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"- INSTALL antivirus as per reccomendations"[20;7H- TEST"[39m(B[m[K[21d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"If neccesary,"[2d[39m(B[m[?12l[?25h[?25l[7G(B[0;1m[33m- TEST"[39m(B[m[K[3d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"If neccesary,"[4d[34mecho[39m(B[m (B[0;1m[33m"- DEBUG"[39m(B[m[K[5d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"- FIX setup and backup scripts"[6d[34mecho[39m(B[m (B[0;1m[33m"- Fix server"[39m(B[m[K[7d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m""[39m(B[m[K[8d(B[0;1m[33mThank you for using the femmebabe installer. Have a great day!"[9d[34mecho[39m(B[m (B[0;1m[33m"Goodbye."[39m(B[m[K[10d[K[11d[K[12d[K[13d[K[14d[K[15d[K[16d[K[17d[K[18d[K[19d[K[20d[K[21d[K[2d[?12l[?25h[?25l[7G(B[0;1m[33mCOPY the below information to domain configuration."[3d[39m(B[mhostname(B[0;1m[35m -I[39m(B[m[K[4dip a [32m|[39m(B[m (B[0;1m[34mgrep[39m(B[m inet[5dip -6 addr [32m|[39m(B[m (B[0;1m[34mgrep[39m(B[m (B[0;1m[33m"scope link"[39m(B[m[K[6dsudo (B[0;1m[34mcat[39m(B[m /etc/opendkim/keys/femmebabe.com/sendonly.txt [32m|[39m(B[m tr(B[0;1m[35m -d[39m(B[m (B[0;1m[33m'\n'[39m(B[m [32m|[39m(B[m (B[0;1m[34msed[39m(B[m (B[0;1m[33m's/\s[39m(B[0;7m>[7;1H(B[0m[36m# Setup completed[8;7H(B[0;1m[33mSetup completed in"[39m(B[m[K[9dwc(B[0;1m[35m -l[39m(B[m scripts/setup[10d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"lines of code."[11d[34mecho[39m(B[m (B[0;1m[33m"Total time:"[12d[39m(B[mduration[32m=(B[0;1m[31m$SECONDS[13d[34mecho[39m(B[m (B[0;1m[33m"$((duration / 60)) minutes and $((duration % 60)) seconds elapsed."[14d[34mecho[39m(B[m (B[0;1m[33m"TODO:"[15d[34mecho[39m(B[m (B[0;1m[33m"- COPY above IPv6 address to domain DNS configuration"[16d[34mecho[39m(B[m (B[0;1m[33m"- COPY domain key to domain DNS configuration"[17d[34mecho[39m(B[m (B[0;1m[33m"- ADD new git repository with git remote add originlab <repo>."[18d[34mecho[39m(B[m (B[0;1m[33m"- OPEN port 25"[19d[34mecho[39m(B[m (B[0;1m[33m"- INSTALL antivirus as per reccomendations"[20d[34mecho[39m(B[m (B[0;1m[33m"- TEST"[21d[34mecho[39m(B[m (B[0;1m[33m"If neccesary,"[2d[39m(B[m[?12l[?25h[?25lsudo dd [32mif=[39m(B[m/dev/zero of[32m=[39m(B[m/swapfile bs[32m=[39m(B[m1024 count[32m=[39m(B[m8388608[K[3dsudo (B[0;1m[34mchmod[39m(B[m 600 /swapfile[4dsudo mkswap /swapfile[5dsudo swapon /swapfile[K[6d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"/swapfile swap swap defaults 0 0"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/fstab[K[7dsudo swapon(B[0;1m[35m --show[8d(B[0m[36m# Init caption engine[39m(B[m[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Initializing routine caption"[10d[39m(B[m/home/team/femmebabe/venv/bin/python /home/team/femmebabe/routine_caption.py[11d/home/team/femmebabe/venv/bin/python /home/team/femmebabe/setup_mail.py[12d[36m# Setup git[39m(B[m[K[13;7H(B[0;1m[33mSetting up git"[39m(B[m[K[14d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[15dsudo (B[0;1m[34mrm[35m -r[39m(B[m .git[K[16dgit init(B[0;1m[35m --initial-branch(B[0m[32m=[39m(B[mmain[K[17d[36m#echo (B[0;1m[33m"Setting user password"[39m(B[m[K[18d[36m#sudo usermod --password $(echo team | openssl passwd -1 -stdin) team[19d# Show ipv6 and opendkim for domain configuration[20;7H(B[0;1m[33mCOPY the below information to domain configuration."[21d[39m(B[mhostname(B[0;1m[35m -I[39m(B[m[K[2d[?12l[?25h[?25l[36m# Disable default site[39m(B[m[K[3;6Ha2dissite 000-default[4;6Ha2dissite 000-default[32m-le[39m(B[m-ssl[5d[36m# Enable our site[39m(B[m[K[6dsudo a2ensite femmebabe[32m-le[39m(B[m-ssl[K[7d[36m# Reload daemon and restart apache, postfix and opendkim[8d[39m(B[msudo systemctl daemon-reload[9dsudo systemctl restart apache2[K[10dsudo systemctl restart opendkim postfix[K[11dsudo systemctl start daphne[K[12;6H[36m permissions[13d[39m(B[msudo (B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[mwww-data /var/www/[14dsudo (B[0;1m[34mchown[35m -R[39m(B[m [32m:[39m(B[mwww-data /var/www/.deepface[15d[36m# Swap configuration[16d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Allocating swap, this may take a while"[17d[39m(B[msudo swapoff /swapfile[K[18dsudo (B[0;1m[34mrm[39m(B[m /swapfile[K[19dsudo fallocate(B[0;1m[35m -l[39m(B[m 8G /swapfile[K[20dsudo dd [32mif=[39m(B[m/dev/zero of[32m=[39m(B[m/swapfile bs[32m=[39m(B[m1024 count[32m=[39m(B[m8388608[K[21dsudo (B[0;1m[34mchmod[39m(B[m 600 /swapfile[2d[?12l[?25h[?25lsudo systemctl enable clamav-daemon[3;6Hsystemctl start daphne.service[4;6Hsystemctl start celery.service[5dsudo systemctl start celerybeat.service[6;6Hsystemctl start clamav-daemon[7;3H[36mEnable apache modules[39m(B[m[K[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Enabling apache2"[39m(B[m[K[9;6Ha2enmod rewrite[K[10;6Ha2enmod wsgi[K[11;6Ha2enmod headers[K[12dsudo a2enmod ssl[K[13;6Ha2enmod proxy[K[14;6Ha2enmod proxy_balancer[K[15dsudo a2enmod proxy_http[16dsudo a2enmod proxy_wstunnel[K[17d[36m#sudo a2dismod mpm_event[18d#sudo a2dismod mpm_worker[19d#sudo a2enmod mpm_prefork[39m(B[m[K[20d[36m# Disable default site[39m(B[m[K[21;6Ha2dissite 000-default[2d[?12l[?25h[?25l[6G(B[0;1m[34mcp[39m(B[m scripts/watchlogs /usr/bin/[3;6H(B[0;1m[34mcp[39m(B[m scripts/logs /usr/bin/[K[4;6H(B[0;1m[34mcp[39m(B[m scripts/cmds /usr/bin/[K[5;6H(B[0;1m[34mcp[39m(B[m scripts/setup /usr/bin/[K[6;6H(B[0;1m[34mcp[39m(B[m scripts/pushweb /usr/bin/[K[7dsudo (B[0;1m[34mcp[39m(B[m scripts/purgecache /usr/bin/[8dsudo (B[0;1m[34mcp[39m(B[m scripts/logssh /usr/bin/[9;6H(B[0;1m[34mcp[39m(B[m config/banner /etc/banner[10d(B[0;1m[34mcd[39m(B[m /usr/bin/[K[11;6H(B[0;1m[34mchmod[39m(B[m a+x activate[12;6H(B[0;1m[34mchmod[39m(B[m a+x backup[13;6H(B[0;1m[34mchmod[39m(B[m a+x ascript[14d[36m# Reload and enable services[15d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Enabling services"[16;6H[39m(B[msystemctl daemon-reload[17dsudo systemctl enable daphne.service[18dsudo systemctl enable celery.service[19dsudo systemctl enable celerybeat.service[20dsudo systemctl enable clamav-daemon[21;6Hsystemctl start daphne.service[2d[?12l[?25h[?25l[36m# Inject pam config and remove faulty ssh config[3d#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/pam.d/sshd[4d#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/profile[5d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"session required pam_exec.so seteuid /home/team/femmebabe/pam.sh"[39m(B[m [32m|[39m(B[m sudo (B[0;7m>[6;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"session required pam_exec.so seteuid /home/team/femmebabe/logout.sh"[39m(B[m [32m|[39m(B[m su(B[0;7m>[7;7H(B[0;1m[34mhmod[39m(B[m a+x pam.sh[K[8;6H(B[0;1m[34mrm[39m(B[m /etc/ssh/sshd_config.d/50-cloud-init.conf[9d[36m# Copy bin scripts and set permissions[10d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Copying scripts"[11;7H[34mp[39m(B[m scripts/reload /usr/bin/[12;7H(B[0;1m[34mp[39m(B[m scripts/check /usr/bin/[13;7H(B[0;1m[34mp[39m(B[m scripts/enagpu /usr/bin/[14dsudo (B[0;1m[34mcp[39m(B[m scripts/disgpu /usr/bin/[15dsudo (B[0;1m[34mcp[39m(B[m scripts/activate /usr/bin/[16;6H(B[0;1m[34mcp[39m(B[m scripts/backup /usr/bin/[17;6H(B[0;1m[34mcp[39m(B[m scripts/ascript /usr/bin/[K[18;6H(B[0;1m[34mcp[39m(B[m scripts/setup /usr/bin/[K[19;6H(B[0;1m[34mcp[39m(B[m scripts/addsetup /usr/bin/[K[20;6H(B[0;1m[34mcp[39m(B[m scripts/watchlogs /usr/bin/[21;6H(B[0;1m[34mcp[39m(B[m scripts/logs /usr/bin/[K[2d[?12l[?25h[?25lsudo (B[0;1m[34mcp[39m(B[m config/etc_init.d_celery /etc/init.d/celery[3dsudo (B[0;1m[34mcp[39m(B[m config/etc_init.d_celerybeat /etc/init.d/celerybeat[4dsudo (B[0;1m[34mcp[39m(B[m config/etc_default_celerybeat /etc/default/celerybeat[5dsudo (B[0;1m[34mcp[39m(B[m config/etc_default_celery /etc/default/celery[K[6dsudo (B[0;1m[34mcp[39m(B[m config/etc_systemd_system_daphne.service /etc/systemd/system/daphne.ser[7;7H(B[0;1m[34mp[39m(B[m config/etc_systemd_system_celery.service /etc/systemd/system/celery.ser(B[0;7m>[8;6H(B[0;1m[34mcp[39m(B[m config/etc_systemd_system_celerybeat.service /etc/systemd/system/celery(B[0;7m>[9;1H(B[msudo (B[0;1m[34mchmod[39m(B[m a+x /etc/init.d/celery[K[10dsudo (B[0;1m[34mchmod[39m(B[m a+x /etc/init.d/celerybeat[11d[36m# Setup database[39m(B[m[K[12d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Running migrations, this should be quick"[13d[39m(B[mpython manage.py makemigrations[K[14dpython manage.py migrate(B[0;1m[35m --run-syncdb[15d[34mecho[39m(B[m (B[0;1m[33m"Loading data, this may take a while"[16d[39m(B[mpython manage.py loaddata db.json[17d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setup crontab/sudoers configuration"[18;6H[39m(B[mcrontab(B[0;1m[35m -l -u[39m(B[m root [32m|[39m(B[m (B[0;1m[34mcat[39m(B[m - config/crontab [32m|[39m(B[m sudo crontab(B[0;1m[35m -u[39m(B[m root -[19;6Hsh(B[0;1m[35m -c[39m(B[m (B[0;1m[33m"cat config/sudoers >> /etc/sudoers"[20d(B[0m[36m# Inject pam config and remove faulty ssh config[21d#sudo sed -i (B[0;1m[33m''(B[0m[36m -e (B[0;1m[33m'$ d'(B[0m[36m /etc/pam.d/sshd[2d[39m(B[m[?12l[?25h[?25l[7G(B[0;1m[34mhmod[35m -R[39m(B[m g+rX .././[K[3;7H(B[0;1m[34mhmod[35m -R[39m(B[m g-rwX ../.ssh[K[4;7H(B[0;1m[34mhmod[39m(B[m 774 ./[K[5d[36m#sudo chmod 664 db.sqlite3[39m(B[m[K[6d[36m#sudo chown www-data:users db.sqlite3[39m(B[m[K[7;7H(B[0;1m[34mhown[35m -R[39m(B[m www-data[32m:[39m(B[mwww-data media/[K[8;7H(B[0;1m[34mhown[39m(B[m www-data[32m:[39m(B[musers ./[K[9;8H(B[0;1m[34mown[35m -R[39m(B[m team[32m:[39m(B[musers media/[K[10;8H(B[0;1m[34mown[35m -R[39m(B[m team[32m:[39m(B[musers ./[K[11dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers ./gfpgan/[12dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers ./temp/[K[13dsudo (B[0;1m[34mchmod[39m(B[m a+r team /var/mail/(B[0;1m[31m$USER[14d(B[0m[36m# Copy config and set permissions[39m(B[m[K[15;7H(B[0;1m[33mConfiguring remaining services"[39m(B[m[K[16dsudo (B[0;1m[34mcp[39m(B[m config/apis.json /etc/apis.json[17dsudo (B[0;1m[34mcp[39m(B[m config/config.json /etc/config.json[18;6H(B[0;1m[34mcp[39m(B[m config/femmebabe[32m-le[39m(B[m-ssl.conf /etc/apache2/sites-available/femmebabe[32m-le[39m(B[m-(B[0;7m>[19;6H(B[0;1m[34mcp[39m(B[m config/etc_dovecot_passwd /etc/dovecot/passwd[20dsudo (B[0;1m[34mcp[39m(B[m config/etc_init.d_celery /etc/init.d/celery[21dsudo (B[0;1m[34mcp[39m(B[m config/etc_init.d_celerybeat /etc/init.d/celerybeat[2d[?12l[?25h[?25l(B[0;1m[34mcp[39m(B[m scripts/pwa_webpush_forms.py /home/team/femmebabe/venv/lib/python3.10/site-p(B[0;7m>[3;1H(B[0;1m[34mcp[39m(B[m scripts/webauth_views.py /home/team/femmebabe/venv/lib/python3.10/site-packa(B[0;7m>[4;1H(B[0;1m[34mcp[39m(B[m scripts/json.py venv/lib/python3.10/site-packages/django/core/serializers/js(B[0;7m>[5;2H(B[0m[36m Set user settings[39m(B[m[K[6dsudo gpasswd(B[0;1m[35m -a[39m(B[m www-data users[K[7d[36m# Set permissions[39m(B[m[K[8d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Setting permissions"[39m(B[m[K[9dcache[10;8H(B[0;1m[34mmod[39m(B[m a+rwx(B[0;1m[35m -R[39m(B[m cache/[K[11d[36m#sudo chown -R team:users /var/run/[12d#sudo chown root:root /run/sudo/ts -R[13;8H(B[0;1m[34mown[35m -R[39m(B[m redis[32m:[39m(B[mredis /var/lib/redis[14dsudo (B[0;1m[34mchown[35m -R[39m(B[m redis[32m:[39m(B[mredis /var/log/redis[15dsudo (B[0;1m[34mchmod[35m -R[39m(B[m u+rwX,g+rwX,u+rx /var/log/redis[16;7H(B[0;1m[34mhmod[39m(B[m +r /etc/redis/redis.conf[K[17;7H(B[0;1m[34mhown[35m -R[39m(B[m team[32m:[39m(B[musers /var/log/[K[18;7H(B[0;1m[34mhown[35m -R[39m(B[m [32m:[39m(B[musers .././[K[19;7H(B[0;1m[34mhmod[35m -R[39m(B[m g+rwX ./[K[20;7H(B[0;1m[34mhmod[35m -R[39m(B[m g+rX .././[K[21;7H(B[0;1m[34mhmod[35m -R[39m(B[m g-rwX ../.ssh[K[2d[?12l[?25h[?25lpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[3d[36m# Install certbot[39m(B[m[K[4d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[39m(B[m[K[5dsudo snap (B[0;1m[34minstall[39m(B[m core[32m;[39m(B[m sudo snap refresh core[6;6Hsnap (B[0;1m[34minstall[35m --classic[39m(B[m certbot[7dsudo (B[0;1m[34mln[35m -s[39m(B[m /snap/bin/certbot /usr/bin/certbot[8dsudo snap (B[0;1m[34minstall[39m(B[m redis[K[9;6Hsystemctl enable apache2[K[10;6Hsystemctl start apache2[11;2H[36m Run certbot[39m(B[m[K[12dsudo certbot(B[0;1m[35m --apache --non-interactive --agree-tos --domains[39m(B[m femmebabe.com(B[0;1m[35m --e[39m(B[0;7m>[13;1H(B[0m[36m# Reload mail server[39m(B[m[K[14;6Hsystemctl restart opendkim postfix dovecot[15d[36m# Copy certs[39m(B[m[K[16d[36m#sudo cp /etc/letsencrypt/live/femmebabe.com/privkey.pem privkey.pem[17d#sudo cp /etc/letsencrypt/live/femmebabe.com/cert.pem cert.pem[18d# Patch venv[39m(B[m[K[19d(B[0;1m[34mcp[39m(B[m scripts/content.py /home/team/femmebabe/venv/lib/python3.10/site-packages/py(B[0;7m>[20;1H(B[0;1m[34mcp[39m(B[m scripts/pwa_webpush_forms.py /home/team/femmebabe/venv/lib/python3.10/site-p(B[0;7m>[21;1H(B[0;1m[34mcp[39m(B[m scripts/webauth_views.py /home/team/femmebabe/venv/lib/python3.10/site-packa(B[0;7m>[2;1H(B[m[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[3d[39m(B[msudo systemctl mask tmp.mount[4d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[5dsource venv/bin/activate[K[6dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m"celery[redis]"[39m(B[m[K[7dpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt(B[0;1m[35m --use-deprecated(B[0m[32m=[39m(B[mlegacy-resolver(B[0;1m[35m --use[39m(B[m-pep517[8dpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python[36m #==4.5.4.60[9d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-contrib-python[36m #==4.5.4.60[10d#pip install opencv-python==4.5.5.64[11d#pip install opencv-contrib-python==4.5.5.64[12d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python-headless[K[13dpip3 uninstall channels[14dpip3 uninstall daphne[K[15dpip3 (B[0;1m[34minstall[39m(B[m channels[32m[(B[0;1m[33m"daphne"(B[0m[32m][16d[39m(B[mpip3 (B[0;1m[34minstall[39m(B[m Pillow[32m==[39m(B[m9.5.0[K[17dpip3 (B[0;1m[34minstall[39m(B[m librosa[K[18dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m'Twisted[tls,http2]'[19d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m certifi requests urllib3 numpy oauthlib twisted pyjwt sq[20dpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[21d[36m# Install certbot[39m(B[m[K[2d[?12l[?25h[?25lpip (B[0;1m[34minstall[39m(B[m basicsr[K[3dpip (B[0;1m[34minstall[39m(B[m facexlib[K[4dpip (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[5dpython setup.py develop[K[6;4H (B[0;1m[34minstall[39m(B[m realesrgan[K[7d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[8dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers gfpgan[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing ta-lib"[39m(B[m[K[10dwget https[32m:[39m(B[m//prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar(B[m.gz[11d(B[0;1m[34mtar[39m(B[m xvzf ta-lib-0.4.0-src.tar(B[m.gz[K[12dsudo (B[0;1m[34mrm[39m(B[m ta-lib-*[K[13d(B[0;1m[34mcd[39m(B[m ta-lib[K[14dsudo ./configure[K[15dsudo (B[0;1m[34mmake[39m(B[m[K[16dsudo (B[0;1m[34mmake[39m(B[m (B[0;1m[34minstall[39m(B[m[K[17d[36m# Set firewall rules[18d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[19d[36m# Install pypi dependencies[39m(B[m[K[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[21d[39m(B[msudo systemctl mask tmp.mount[2d[?12l[?25h[?25l(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[3dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[4;1H(B[mgit clone https[32m:[39m(B[m//github.com/TencentARC/GFPGAN.git[5dgit clone https[32m:[39m(B[m//github.com/davisking/dlib.git[6dsudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m curl gnupg[7dcurl https[32m:[39m(B[m//repo.sshlog.com/sshlog-ubuntu/public.gpg [32m|[39m(B[m sudo gpg(B[0;1m[35m --yes --dearmo[39m(B[0;7m>[8;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"deb [arch=any signed-by=/usr/share/keyrings/repo-sshlog-ubuntu.gpg] https[39m(B[0;7m>[9;1H(B[msudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m sshlog[10d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[11d(B[0;1m[34mcd[39m(B[m dlib[K[12d(B[0;1m[34mmkdir[39m(B[m build[32m;[39m(B[m (B[0;1m[34mcd[39m(B[m build[32m;[39m(B[m cmake ..[32m;[39m(B[m cmake(B[0;1m[35m --build[39m(B[m .[13;4H..[K[14dsource venv/bin/activate[15dpython setup.py (B[0;1m[34minstall[16dcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[17dsource venv/bin/activate[18;8H/GFPGAN/[19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing python dependencies"[20d[39m(B[mpip (B[0;1m[34minstall[39m(B[m basicsr[K[21dpip (B[0;1m[34minstall[39m(B[m facexlib[K[2d[?12l[?25h[?25l(B[0;1m[34mmkdir[39m(B[m temp[3d(B[0;1m[34mmkdir[39m(B[m temp/data[K[4d(B[0;1m[34mmkdir[39m(B[m temp/gfpgan[K[5d(B[0;1m[34mmkdir[39m(B[m mail/inbox[K[6d(B[0;1m[34mmkdir[39m(B[m mailbox[K[7d[36m# Setup virtualenv[39m(B[m[K[8d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Creating virtual environment"[39m(B[m[K[10dpython(B[0;1m[35m -m[39m(B[m venv venv[11dsource venv/bin/activate[12d[36m# Get and build dependencies[39m(B[m[K[13d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Getting and building dependencies, this may take a whike"[14d[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[15dgit clone https[32m:[39m(B[m//github.com/sukhitashvili/violence-detection.git[16;2H(B[0;1m[34mp[39m(B[m config/vd-requirements.txt violence-detection/requirements.txt[17d(B[0;1m[34mcp[39m(B[m config/vd-model.py violence-detection/model.py[18;4Hviolence-detection[19dpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[K[20d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[21dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[2;1H(B[m[?12l[?25h[?25lsudo (B[0;1m[34mchown[39m(B[m [32m:[39m(B[musers /var/mail/*[3dsudo (B[0;1m[34mchmod[35m -R[39m(B[m a+rwx /var/mail/*[4dsudo systemctl restart opendkim postfix dovecot[5d[36m# Create dirs[39m(B[m[K[6d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[7d(B[0;1m[34mmkdir[39m(B[m media/audio[K[8d(B[0;1m[34mmkdir[39m(B[m media/audio/fingerprints[9d(B[0;1m[34mmkdir[39m(B[m media/security[K[10d(B[0;1m[34mmkdir[39m(B[m media/secure[K[11d(B[0;1m[34mmkdir[39m(B[m media/secure/media[12d(B[0;1m[34mmkdir[39m(B[m media/secure/video[K[13d(B[0;1m[34mmkdir[39m(B[m media/secure/profile[K[14d(B[0;1m[34mmkdir[39m(B[m media/secure/face[15d(B[0;1m[34mmkdir[39m(B[m media/images[K[16d(B[0;1m[34mmkdir[39m(B[m media/live[K[17d(B[0;1m[34mmkdir[39m(B[m media/live/files[K[18d(B[0;1m[34mmkdir[39m(B[m media/live/stills[19d(B[0;1m[34mmkdir[39m(B[m media/files[K[20d(B[0;1m[34mmkdir[39m(B[m temp[21d(B[0;1m[34mmkdir[39m(B[m temp/data[K[2d[?12l[?25h[?25l[6Gadduser postfix opendkim[3;6H(B[0;1m[34mmkdir[39m(B[m /etc/opendkim[K[4;6H(B[0;1m[34mmkdir[39m(B[m /etc/opendkim/keys[K[5dsudo (B[0;1m[34mmkdir[39m(B[m /etc/opendkim/keys/femmebabe.com[6dsudo (B[0;1m[34mmkdir[39m(B[m /var/spool/postfix/opendkim[7dsudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"*@femmebabe.com     sendonly._domainkey.femmebabe.com"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[0;7m>[8;1H(B[msudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"sendonly._domainkey.femmebabe.com    femmebabe.com:sendonly:/etc/ope[39m(B[0;7m>[9;1H(B[msudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"127.0.0.1"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[10dsudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"localhost"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[11dsudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m""[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[12dsudo (B[0;1m[34mecho[39m(B[m (B[0;1m[33m"*.femmebabe.com"[39m(B[m [32m|[39m(B[m sudo tee(B[0;1m[35m -a[39m(B[m /etc/opendkim/trusted.hosts[13dsudo (B[0;1m[34mchown[35m -R[39m(B[m opendkim[32m:[39m(B[mopendkim /etc/opendkim[14dsudo opendkim-genkey(B[0;1m[35m -b[39m(B[m 2048(B[0;1m[35m -d[39m(B[m femmebabe.com(B[0;1m[35m -D[39m(B[m /etc/opendkim/keys/femmebabe.c(B[0;7m>[15;1H(B[msudo (B[0;1m[34mchmod[39m(B[m go-rw /etc/opendkim/keys[16dsudo (B[0;1m[34mchown[39m(B[m opendkim[32m:[39m(B[mopendkim /etc/opendkim/keys/femmebabe.com/sendonly.private[17dsudo (B[0;1m[34mchown[39m(B[m opendkim[32m:[39m(B[mpostfix /var/spool/postfix/opendkim[18d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[19dsudo (B[0;1m[34mcp[39m(B[m mailbox/* /var/mail/[20dsudo (B[0;1m[34mchown[39m(B[m [32m:[39m(B[musers /var/mail/*[21dsudo (B[0;1m[34mchmod[35m -R[39m(B[m a+rwx /var/mail/*[2d[?12l[?25h[?25l[6G(B[0;1m[34mchown[39m(B[m [32m:[39m(B[musers /var/mail/*[3;6H(B[0;1m[34mchmod[35m -R[39m(B[m a+rwx /var/mail/*[4;6Hsystemctl restart opendkim postfix dovecot[5d[36m# Create dirs[39m(B[m[K[6d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[7d(B[0;1m[34mmkdir[39m(B[m media/audio[K[8d(B[0;1m[34mmkdir[39m(B[m media/audio/fingerprints[K[9d(B[0;1m[34mmkdir[39m(B[m media/security[K[10d(B[0;1m[34mmkdir[39m(B[m media/secure[K[11d(B[0;1m[34mmkdir[39m(B[m media/secure/media[K[12d(B[0;1m[34mmkdir[39m(B[m media/secure/video[K[13d(B[0;1m[34mmkdir[39m(B[m media/secure/profile[K[14d(B[0;1m[34mmkdir[39m(B[m media/secure/face[K[15d(B[0;1m[34mmkdir[39m(B[m media/images[K[16d(B[0;1m[34mmkdir[39m(B[m media/live[K[17d(B[0;1m[34mmkdir[39m(B[m media/live/files[K[18d(B[0;1m[34mmkdir[39m(B[m media/live/stills[19d(B[0;1m[34mmkdir[39m(B[m media/files[K[20d(B[0;1m[34mmkdir[39m(B[m temp[K[21d(B[0;1m[34mmkdir[39m(B[m temp/data[K[2d[?12l[?25h[?25l(B[0;1m[34mmkdir[39m(B[m temp[K[3d(B[0;1m[34mmkdir[39m(B[m temp/data[K[4d(B[0;1m[34mmkdir[39m(B[m temp/gfpgan[K[5d(B[0;1m[34mmkdir[39m(B[m mail/inbox[6d(B[0;1m[34mmkdir[39m(B[m mailbox[7d[36m# Setup virtualenv[8d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Creating virtual environment"[10d[39m(B[mpython(B[0;1m[35m -m[39m(B[m venv venv[11dsource venv/bin/activate[12d[36m# Get and build dependencies[13d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Getting and building dependencies, this may take a whike"[14d[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[15dgit clone https[32m:[39m(B[m//github.com/sukhitashvili/violence-detection.git[16d(B[0;1m[34mcp[39m(B[m config/vd-requirements.txt violence-detection/requirements.txt[17d(B[0;1m[34mcp[39m(B[m config/vd-model.py violence-detection/model.py[18d(B[0;1m[34mcd[39m(B[m violence-detection[K[19dpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[20d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[21dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[2;1H(B[m[?12l[?25h[?25l(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[3dwget https[32m:[39m(B[m//github.com/TencentARC/GFPGAN/releases/download/v1.3.0/GFPGANv1.3.p(B[0;7m>[4;1H(B[mgit clone https[32m:[39m(B[m//github.com/TencentARC/GFPGAN.git[5dgit clone https[32m:[39m(B[m//github.com/davisking/dlib.git[6dsudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m curl gnupg[7dcurl https[32m:[39m(B[m//repo.sshlog.com/sshlog-ubuntu/public.gpg [32m|[39m(B[m sudo gpg(B[0;1m[35m --yes --dearmo[39m(B[0;7m>[8;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"deb [arch=any signed-by=/usr/share/keyrings/repo-sshlog-ubuntu.gpg] https[39m(B[0;7m>[9;1H(B[msudo apt update [32m&&[39m(B[m sudo apt (B[0;1m[34minstall[35m -y[39m(B[m sshlog[10d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[11d(B[0;1m[34mcd[39m(B[m dlib[K[12d(B[0;1m[34mmkdir[39m(B[m build[32m;[39m(B[m (B[0;1m[34mcd[39m(B[m build[32m;[39m(B[m cmake ..[32m;[39m(B[m cmake(B[0;1m[35m --build[39m(B[m .[13d(B[0;1m[34mcd[39m(B[m ..[K[14dsource venv/bin/activate[15dpython setup.py (B[0;1m[34minstall[39m(B[m[K[16;2H(B[0;1m[34md[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[17dsource venv/bin/activate[K[18;4H(B[0;1m[31m$DIR[39m(B[m/GFPGAN/[K[19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing python dependencies"[20d[39m(B[mpip (B[0;1m[34minstall[39m(B[m basicsr[21dpip (B[0;1m[34minstall[39m(B[m facexlib[K[2d[?12l[?25h[?25lpip (B[0;1m[34minstall[39m(B[m basicsr[3dpip (B[0;1m[34minstall[39m(B[m facexlib[K[4dpip (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt[K[5dpython setup.py develop[K[6dpip (B[0;1m[34minstall[39m(B[m realesrgan[K[7d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[8dsudo (B[0;1m[34mchown[35m -R[39m(B[m team[32m:[39m(B[musers gfpgan[K[9d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing ta-lib"[39m(B[m[K[10dwget https[32m:[39m(B[m//prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar(B[m.gz[11d(B[0;1m[34mtar[39m(B[m xvzf ta-lib-0.4.0-src.tar(B[m.gz[12dsudo (B[0;1m[34mrm[39m(B[m ta-lib-*[K[13;4Hta-lib[14dsudo ./configure[K[15dsudo (B[0;1m[34mmake[39m(B[m[K[16dsudo (B[0;1m[34mmake[39m(B[m (B[0;1m[34minstall[17d(B[0m[36m# Set firewall rules[39m(B[m[K[18;8H[K[19d[36m# Install pypi dependencies[39m(B[m[K[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[21d[39m(B[msudo systemctl mask tmp.mount[2d[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[3d[39m(B[msudo systemctl mask tmp.mount[4d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[5dsource venv/bin/activate[6;4H3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m"celery[redis]"[7d[39m(B[mpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt(B[0;1m[35m --use-deprecated(B[0m[32m=[39m(B[mlegacy-resolver(B[0;1m[35m --use[39m(B[m-pep517[8dpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python[36m #==4.5.4.60[9d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-contrib-python[36m #==4.5.4.60[10d#pip install opencv-python==4.5.5.64[39m(B[m[K[11d[36m#pip install opencv-contrib-python==4.5.5.64[12d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python-headless[13dpip3 uninstall channels[14dpip3 uninstall daphne[15dpip3 (B[0;1m[34minstall[39m(B[m channels[32m[(B[0;1m[33m"daphne"(B[0m[32m][16d[39m(B[mpip3 (B[0;1m[34minstall[39m(B[m Pillow[32m==[39m(B[m9.5.0[17dpip3 (B[0;1m[34minstall[39m(B[m librosa[18dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m'Twisted[tls,http2]'[19d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m certifi requests urllib3 numpy oauthlib twisted pyjwt sq(B[0;7m>[20;1H(B[mpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[21d[36m# Install certbot[39m(B[m[K[2d[?12l[?25h[?25lpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[3d[36m# Install certbot[39m(B[m[K[4d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[5;2H[39m(B[mudo snap (B[0;1m[34minstall[39m(B[m core[32m;[39m(B[m sudo snap refresh core[6dsudo snap (B[0;1m[34minstall[35m --classic[39m(B[m certbot[7dsudo (B[0;1m[34mln[35m -s[39m(B[m /snap/bin/certbot /usr/bin/certbot[K[8dsudo snap (B[0;1m[34minstall[39m(B[m redis[K[9dsudo systemctl enable apache2[K[10dsudo systemctl start apache2[K[11;2H[36m Run certbot[39m(B[m[K[12dsudo certbot(B[0;1m[35m --apache --non-interactive --agree-tos --domains[39m(B[m femmebabe.com(B[0;1m[35m --e[39m(B[0;7m>[13;1H(B[0m[36m# Reload mail server[39m(B[m[K[14dsudo systemctl restart opendkim postfix dovecot[15d[36m# Copy certs[39m(B[m[K[16d[36m#sudo cp /etc/letsencrypt/live/femmebabe.com/privkey.pem privkey.pem[17d#sudo cp /etc/letsencrypt/live/femmebabe.com/cert.pem cert.pem[18d# Patch venv[39m(B[m[K[19d(B[0;1m[34mcp[39m(B[m scripts/content.py /home/team/femmebabe/venv/lib/python3.10/site-packages/py[20d(B[0;1m[34mcp[39m(B[m scripts/pwa_webpush_forms.py /home/team/femmebabe/venv/lib/python3.10/site-p(B[0;7m>[21;1H(B[0;1m[34mcp[39m(B[m scripts/webauth_views.py /home/team/femmebabe/venv/lib/python3.10/site-packa(B[0;7m>[2;1H(B[m[?12l[?25h[?25l(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing remaining python dependencies (this may take a while)"[3d[39m(B[msudo systemctl mask tmp.mount[4d(B[0;1m[34mcd[39m(B[m (B[0;1m[31m$DIR[39m(B[m[K[5dsource venv/bin/activate[K[6dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m"celery[redis]"[39m(B[m[K[7dpip3 (B[0;1m[34minstall[35m -r[39m(B[m requirements.txt(B[0;1m[35m --use-deprecated(B[0m[32m=[39m(B[mlegacy-resolver(B[0;1m[35m --use[39m(B[m-pep517[8dpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python[36m #==4.5.4.60[9d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-contrib-python[36m #==4.5.4.60[10d#pip install opencv-python==4.5.5.64[11d#pip install opencv-contrib-python==4.5.5.64[12d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m opencv-python-headless[K[13dpip3 uninstall channels[14dpip3 uninstall daphne[K[15dpip3 (B[0;1m[34minstall[39m(B[m channels[32m[(B[0;1m[33m"daphne"(B[0m[32m][16d[39m(B[mpip3 (B[0;1m[34minstall[39m(B[m Pillow[32m==[39m(B[m9.5.0[K[17dpip3 (B[0;1m[34minstall[39m(B[m librosa[K[18dpip3 (B[0;1m[34minstall[35m -U[39m(B[m (B[0;1m[33m'Twisted[tls,http2]'[19d[39m(B[mpip3 (B[0;1m[34minstall[35m --upgrade[39m(B[m certifi requests urllib3 numpy oauthlib twisted pyjwt sq[20dpip3 (B[0;1m[34minstall[39m(B[m tensorflow[32m==[39m(B[m2.15.1[K[21d[36m# Install certbot[39m(B[m[K[2d[?12l[?25h[?25l[?12l[?25h[3d[?25l[?12l[?25h[4d[?25l[?12l[?25h[5d[?25l[?12l[?25h[6d[?25l[?12l[?25h[7d[?25l[?12l[?25h[8d[?25l[?12l[?25h[9d[?25l[?12l[?25h[10d[?25l[?12l[?25h[11d[?25l[?12l[?25h[12d[?25l[?12l[?25h[13d[?25l[?12l[?25h[14d[?25l[?12l[?25h[15d[?25l[?12l[?25h[17d[?25l[?12l[?25h[18d[?25l[?12l[?25h[19d[?25l[?12l[?25h[20d[?25l[?12l[?25h[21d[?25l[?12l[?25h7[2;22r8[22d
[1;24r[21;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[39m(B[m[?25l[?12l[?25h[A[?25l[1;51H(B[0;7m*[79G(B[m[20dpython3(B[0;1m[35m -m[39m(B[m pip (B[0;1m[34minstall[39m(B[m tensorflow[32m[[39m(B[mand-cuda[32m][39m(B[m# Install certbot[20;44H[?12l[?25h[?25l[K[21d[36m# Install certbot[39m(B[m[K[?12l[?25h[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[20d[?25l[?12l[?25hp[?25l[?12l[?25hy[?25l[?12l[?25ht[?25l[?12l[?25hh[?25l[?12l[?25ho[?25l[?12l[?25hn[?25l[?12l[?25h3[?25l[?12l[?25h[C[?25l[?12l[?25h[C[?25l[?12l[?25h[C[?25l[?12l[?25h -[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h[1P[?25l[?12l[?25h [?25l[?12l[?25hp[?25l[?12l[?25hi[?25l[?12l[?25hp[?25l[?12l[?25h3 (B[0;1m[34minstall[39m(B[m tensorflow[32m[[39m(B[mand-cuda[32m][6G[39m(B[m[?25l[?12l[?25h[?25l[?12l[?25h [?25l[?12l[?25h[1P[?25l[?12l[?25h[A[?25l[19;22r[22;1H
[1;24r[21;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[19d[39m(B[m[?12l[?25h[?25l[?12l[?25h[20d[?25lpip (B[0;1m[34minstall[35m --pre[39m(B[m torch-tensorrt(B[0;1m[35m --index-url[39m(B[m https[32m:[39m(B[m//download.pytorch.org/whl/n(B[0;7m>[21;1H(B[0m[36m# Install certbot[39m(B[m[K[?12l[?25h[?25l[?12l[?25h7[2;22r8[22d
[1;24r[21;1H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"Installing certificates"[39m(B[m[?25l[?12l[?25h7[2;22r8[22d
[1;24r[21;1Hsudo snap (B[0;1m[34minstall[39m(B[m core[32m;[39m(B[m sudo snap refresh core[?25l[?12l[?25h7[2;22r8[22d
[1;24r[21;1Hsudo snap (B[0;1m[34minstall[35m --classic[39m(B[m certbot[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[A[?25l[?12l[?25h[17d[?25l[?12l[?25hp[?25l[?12l[?25hi[?25l[?12l[?25hp[?25l[?12l[?25h3 (B[0;1m[34minstall[35m --pre[39m(B[m torch-tensorrt(B[0;1m[35m --index-url[39m(B[m https[32m:[39m(B[m//download.pytorch.org/whl/[5G[?25l[22d(B[0;7mSave modified buffer?                                                           [23;1H Y(B[m Yes[K[24d(B[0;7m N(B[m No  [14G   (B[0;7m^C(B[m Cancel[K[22;23H[?12l[?25h[?25l[23d(B[0;7m^G(B[m Help[23;21H(B[0;7mM-D(B[m DOS Format[41G(B[0;7mM-A(B[m Append[23;61H(B[0;7mM-B(B[m Backup File[24d(B[0;7m^C(B[m Cancel[17G    (B[0;7mM-M(B[m Mac Format[41G(B[0;7mM-P(B[m Prepend[24;61H(B[0;7m^T(B[m Browse[22d(B[0;7mFile Name to Write: /usr/bin/setup(B[m[?12l[?25h[?25l[1K (B[0;7m[ Writing... ](B[m[K[1;51H(B[0;7m [79G(B[m[22;31H(B[0;7m[ Wrote 405 lines ](B[m[J[24d[?12l[?25h[24;1H[?1049l[23;0;0t[?1l>[?2004l[?2004h]0;team@femmebabe: ~[01;32mteam@femmebabe[00m:[01;34m~[00m$ python3 -v
[?2004limport _frozen_importlib # frozen
import _imp # builtin
import '_thread' # <class '_frozen_importlib.BuiltinImporter'>
import '_warnings' # <class '_frozen_importlib.BuiltinImporter'>
import '_weakref' # <class '_frozen_importlib.BuiltinImporter'>
import '_io' # <class '_frozen_importlib.BuiltinImporter'>
import 'marshal' # <class '_frozen_importlib.BuiltinImporter'>
import 'posix' # <class '_frozen_importlib.BuiltinImporter'>
import '_frozen_importlib_external' # <class '_frozen_importlib.FrozenImporter'>
# installing zipimport hook
import 'time' # <class '_frozen_importlib.BuiltinImporter'>
import 'zipimport' # <class '_frozen_importlib.FrozenImporter'>
# installed zipimport hook
# /usr/lib/python3.12/encodings/__pycache__/__init__.cpython-312.pyc matches /usr/lib/python3.12/encodings/__init__.py
# code object from '/usr/lib/python3.12/encodings/__pycache__/__init__.cpython-312.pyc'
import '_codecs' # <class '_frozen_importlib.BuiltinImporter'>
import 'codecs' # <class '_frozen_importlib.FrozenImporter'>
# /usr/lib/python3.12/encodings/__pycache__/aliases.cpython-312.pyc matches /usr/lib/python3.12/encodings/aliases.py
# code object from '/usr/lib/python3.12/encodings/__pycache__/aliases.cpython-312.pyc'
import 'encodings.aliases' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799d68950>
import 'encodings' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799d33f50>
# /usr/lib/python3.12/encodings/__pycache__/utf_8.cpython-312.pyc matches /usr/lib/python3.12/encodings/utf_8.py
# code object from '/usr/lib/python3.12/encodings/__pycache__/utf_8.cpython-312.pyc'
import 'encodings.utf_8' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799d6aed0>
import '_signal' # <class '_frozen_importlib.BuiltinImporter'>
import '_abc' # <class '_frozen_importlib.BuiltinImporter'>
import 'abc' # <class '_frozen_importlib.FrozenImporter'>
import 'io' # <class '_frozen_importlib.FrozenImporter'>
import '_stat' # <class '_frozen_importlib.BuiltinImporter'>
import 'stat' # <class '_frozen_importlib.FrozenImporter'>
import '_collections_abc' # <class '_frozen_importlib.FrozenImporter'>
import 'genericpath' # <class '_frozen_importlib.FrozenImporter'>
import 'posixpath' # <class '_frozen_importlib.FrozenImporter'>
import 'os' # <class '_frozen_importlib.FrozenImporter'>
import '_sitebuiltins' # <class '_frozen_importlib.FrozenImporter'>
Processing user site-packages
Processing global site-packages
Adding directory: '/usr/local/lib/python3.12/dist-packages'
Adding directory: '/usr/lib/python3/dist-packages'
Processing .pth file: '/usr/lib/python3/dist-packages/distutils-precedence.pth'
# /usr/lib/python3/dist-packages/_distutils_hack/__pycache__/__init__.cpython-312.pyc matches /usr/lib/python3/dist-packages/_distutils_hack/__init__.py
# code object from '/usr/lib/python3/dist-packages/_distutils_hack/__pycache__/__init__.cpython-312.pyc'
import '_distutils_hack' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799302480>
# /usr/lib/python3.12/__pycache__/sitecustomize.cpython-312.pyc matches /usr/lib/python3.12/sitecustomize.py
# code object from '/usr/lib/python3.12/__pycache__/sitecustomize.cpython-312.pyc'
# /usr/lib/python3/dist-packages/__pycache__/apport_python_hook.cpython-312.pyc matches /usr/lib/python3/dist-packages/apport_python_hook.py
# code object from '/usr/lib/python3/dist-packages/__pycache__/apport_python_hook.cpython-312.pyc'
import 'apport_python_hook' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799302d50>
import 'sitecustomize' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993015b0>
import 'site' # <class '_frozen_importlib.FrozenImporter'>
# extension module 'readline' loaded from '/usr/lib/python3.12/lib-dynload/readline.cpython-312-x86_64-linux-gnu.so'
# extension module 'readline' executed from '/usr/lib/python3.12/lib-dynload/readline.cpython-312-x86_64-linux-gnu.so'
import 'readline' # <_frozen_importlib_external.ExtensionFileLoader object at 0x79d799303470>
# /usr/lib/python3.12/__pycache__/rlcompleter.cpython-312.pyc matches /usr/lib/python3.12/rlcompleter.py
# code object from '/usr/lib/python3.12/__pycache__/rlcompleter.cpython-312.pyc'
import 'atexit' # <class '_frozen_importlib.BuiltinImporter'>
# /usr/lib/python3.12/__pycache__/inspect.cpython-312.pyc matches /usr/lib/python3.12/inspect.py
# code object from '/usr/lib/python3.12/__pycache__/inspect.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/ast.cpython-312.pyc matches /usr/lib/python3.12/ast.py
# code object from '/usr/lib/python3.12/__pycache__/ast.cpython-312.pyc'
# /usr/lib/python3.12/re/__pycache__/__init__.cpython-312.pyc matches /usr/lib/python3.12/re/__init__.py
# code object from '/usr/lib/python3.12/re/__pycache__/__init__.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/enum.cpython-312.pyc matches /usr/lib/python3.12/enum.py
# code object from '/usr/lib/python3.12/__pycache__/enum.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/types.cpython-312.pyc matches /usr/lib/python3.12/types.py
# code object from '/usr/lib/python3.12/__pycache__/types.cpython-312.pyc'
import 'types' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799381c70>
# /usr/lib/python3.12/__pycache__/operator.cpython-312.pyc matches /usr/lib/python3.12/operator.py
# code object from '/usr/lib/python3.12/__pycache__/operator.cpython-312.pyc'
import '_operator' # <class '_frozen_importlib.BuiltinImporter'>
import 'operator' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799381e50>
# /usr/lib/python3.12/__pycache__/functools.cpython-312.pyc matches /usr/lib/python3.12/functools.py
# code object from '/usr/lib/python3.12/__pycache__/functools.cpython-312.pyc'
# /usr/lib/python3.12/collections/__pycache__/__init__.cpython-312.pyc matches /usr/lib/python3.12/collections/__init__.py
# code object from '/usr/lib/python3.12/collections/__pycache__/__init__.cpython-312.pyc'
import 'itertools' # <class '_frozen_importlib.BuiltinImporter'>
# /usr/lib/python3.12/__pycache__/keyword.cpython-312.pyc matches /usr/lib/python3.12/keyword.py
# code object from '/usr/lib/python3.12/__pycache__/keyword.cpython-312.pyc'
import 'keyword' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993c99a0>
# /usr/lib/python3.12/__pycache__/reprlib.cpython-312.pyc matches /usr/lib/python3.12/reprlib.py
# code object from '/usr/lib/python3.12/__pycache__/reprlib.cpython-312.pyc'
import 'reprlib' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993c9c70>
import '_collections' # <class '_frozen_importlib.BuiltinImporter'>
import 'collections' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799391790>
import '_functools' # <class '_frozen_importlib.BuiltinImporter'>
import 'functools' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799382f90>
import 'enum' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799366ff0>
# /usr/lib/python3.12/re/__pycache__/_compiler.cpython-312.pyc matches /usr/lib/python3.12/re/_compiler.py
# code object from '/usr/lib/python3.12/re/__pycache__/_compiler.cpython-312.pyc'
import '_sre' # <class '_frozen_importlib.BuiltinImporter'>
# /usr/lib/python3.12/re/__pycache__/_parser.cpython-312.pyc matches /usr/lib/python3.12/re/_parser.py
# code object from '/usr/lib/python3.12/re/__pycache__/_parser.cpython-312.pyc'
# /usr/lib/python3.12/re/__pycache__/_constants.cpython-312.pyc matches /usr/lib/python3.12/re/_constants.py
# code object from '/usr/lib/python3.12/re/__pycache__/_constants.cpython-312.pyc'
import 're._constants' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993f1160>
import 're._parser' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993cbd70>
# /usr/lib/python3.12/re/__pycache__/_casefix.cpython-312.pyc matches /usr/lib/python3.12/re/_casefix.py
# code object from '/usr/lib/python3.12/re/__pycache__/_casefix.cpython-312.pyc'
import 're._casefix' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799380770>
import 're._compiler' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799390d70>
# /usr/lib/python3.12/__pycache__/copyreg.cpython-312.pyc matches /usr/lib/python3.12/copyreg.py
# code object from '/usr/lib/python3.12/__pycache__/copyreg.cpython-312.pyc'
import 'copyreg' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993f2420>
import 're' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799366330>
import '_ast' # <class '_frozen_importlib.BuiltinImporter'>
# /usr/lib/python3.12/__pycache__/contextlib.cpython-312.pyc matches /usr/lib/python3.12/contextlib.py
# code object from '/usr/lib/python3.12/__pycache__/contextlib.cpython-312.pyc'
import 'contextlib' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7991e6300>
import 'ast' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799350ad0>
# /usr/lib/python3.12/__pycache__/dis.cpython-312.pyc matches /usr/lib/python3.12/dis.py
# code object from '/usr/lib/python3.12/__pycache__/dis.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/opcode.cpython-312.pyc matches /usr/lib/python3.12/opcode.py
# code object from '/usr/lib/python3.12/__pycache__/opcode.cpython-312.pyc'
import '_opcode' # <class '_frozen_importlib.BuiltinImporter'>
import 'opcode' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7992119a0>
import 'dis' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799351d30>
# /usr/lib/python3.12/collections/__pycache__/abc.cpython-312.pyc matches /usr/lib/python3.12/collections/abc.py
# code object from '/usr/lib/python3.12/collections/__pycache__/abc.cpython-312.pyc'
import 'collections.abc' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799212ed0>
# /usr/lib/python3.12/importlib/__pycache__/__init__.cpython-312.pyc matches /usr/lib/python3.12/importlib/__init__.py
# code object from '/usr/lib/python3.12/importlib/__pycache__/__init__.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/warnings.cpython-312.pyc matches /usr/lib/python3.12/warnings.py
# code object from '/usr/lib/python3.12/__pycache__/warnings.cpython-312.pyc'
import 'warnings' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799212570>
import 'importlib' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799212a50>
import 'importlib.machinery' # <class '_frozen_importlib.FrozenImporter'>
# /usr/lib/python3.12/__pycache__/linecache.cpython-312.pyc matches /usr/lib/python3.12/linecache.py
# code object from '/usr/lib/python3.12/__pycache__/linecache.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/tokenize.cpython-312.pyc matches /usr/lib/python3.12/tokenize.py
# code object from '/usr/lib/python3.12/__pycache__/tokenize.cpython-312.pyc'
# /usr/lib/python3.12/__pycache__/token.cpython-312.pyc matches /usr/lib/python3.12/token.py
# code object from '/usr/lib/python3.12/__pycache__/token.cpython-312.pyc'
import 'token' # <_frozen_importlib_external.SourceFileLoader object at 0x79d79922f1a0>
import '_tokenize' # <class '_frozen_importlib.BuiltinImporter'>
import 'tokenize' # <_frozen_importlib_external.SourceFileLoader object at 0x79d79922dd30>
import 'linecache' # <_frozen_importlib_external.SourceFileLoader object at 0x79d79922daf0>
import 'inspect' # <_frozen_importlib_external.SourceFileLoader object at 0x79d799303b90>
import 'rlcompleter' # <_frozen_importlib_external.SourceFileLoader object at 0x79d7993035f0>
Python 3.12.3 (main, Apr 10 2024, 05:33:47) [GCC 13.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> exit90[K[K()
# clear sys.path_importer_cache
# clear sys.path_hooks
# clear builtins._
# clear sys.path
# clear sys.argv
# clear sys.ps1
# clear sys.ps2
# clear sys.last_exc
# clear sys.last_type
# clear sys.last_value
# clear sys.last_traceback
# clear sys.__interactivehook__
# clear sys.meta_path
# restore sys.stdin
# restore sys.stdout
# restore sys.stderr
# cleanup[2] removing sys
# cleanup[2] removing builtins
# cleanup[2] removing _frozen_importlib
# cleanup[2] removing _imp
# cleanup[2] removing _thread
# cleanup[2] removing _warnings
# cleanup[2] removing _weakref
# cleanup[2] removing _io
# cleanup[2] removing marshal
# cleanup[2] removing posix
# cleanup[2] removing _frozen_importlib_external
# cleanup[2] removing time
# cleanup[2] removing zipimport
# destroy zipimport
# cleanup[2] removing _codecs
# cleanup[2] removing codecs
# cleanup[2] removing encodings.aliases
# cleanup[2] removing encodings
# destroy encodings
# cleanup[2] removing encodings.utf_8
# cleanup[2] removing _signal
# cleanup[2] removing _abc
# cleanup[2] removing abc
# cleanup[2] removing io
# cleanup[2] removing __main__
# cleanup[2] removing _stat
# cleanup[2] removing stat
# cleanup[2] removing _collections_abc
# cleanup[2] removing genericpath
# cleanup[2] removing posixpath
# cleanup[2] removing os.path
# cleanup[2] removing os
# cleanup[2] removing _sitebuiltins
# cleanup[2] removing _distutils_hack
# destroy _distutils_hack
# cleanup[2] removing apport_python_hook
# cleanup[2] removing sitecustomize
# destroy sitecustomize
# destroy apport_python_hook
# cleanup[2] removing site
# destroy site
# cleanup[2] removing readline
# cleanup[2] removing atexit
# cleanup[2] removing types
# cleanup[2] removing _operator
# cleanup[2] removing operator
# destroy operator
# cleanup[2] removing itertools
# cleanup[2] removing keyword
# cleanup[2] removing reprlib
# destroy reprlib
# cleanup[2] removing _collections
# cleanup[2] removing collections
# cleanup[2] removing _functools
# cleanup[2] removing functools
# cleanup[2] removing enum
# cleanup[2] removing _sre
# cleanup[2] removing re._constants
# cleanup[2] removing re._parser
# cleanup[2] removing re._casefix
# cleanup[2] removing re._compiler
# cleanup[2] removing copyreg
# cleanup[2] removing re
# cleanup[2] removing _ast
# destroy _ast
# cleanup[2] removing contextlib
# destroy contextlib
# cleanup[2] removing ast
# cleanup[2] removing _opcode
# cleanup[2] removing opcode
# destroy opcode
# cleanup[2] removing dis
# cleanup[2] removing collections.abc
# cleanup[2] removing importlib._bootstrap
# cleanup[2] removing importlib._bootstrap_external
# cleanup[2] removing warnings
# cleanup[2] removing importlib
# cleanup[2] removing importlib.machinery
# cleanup[2] removing token
# cleanup[2] removing _tokenize
# cleanup[2] removing tokenize
# cleanup[2] removing linecache
# cleanup[2] removing inspect
# cleanup[2] removing rlcompleter
# destroy rlcompleter
# destroy time
# destroy _signal
# destroy _sitebuiltins
# destroy inspect
# destroy keyword
# destroy __main__
# destroy atexit
# destroy ast
# destroy dis
# destroy importlib
# destroy linecache
# destroy token
# destroy types
# destroy io
# destroy _opcode
# destroy warnings
# destroy importlib.machinery
# destroy tokenize
# destroy collections
# destroy _tokenize
# cleanup[3] wiping importlib._bootstrap_external
# cleanup[3] wiping importlib._bootstrap
# destroy _frozen_importlib_external
# cleanup[3] wiping collections.abc
# cleanup[3] wiping re
# destroy re._constants
# destroy re._casefix
# destroy re._compiler
# destroy enum
# destroy functools
# destroy copyreg
# cleanup[3] wiping re._parser
# cleanup[3] wiping _sre
# cleanup[3] wiping _functools
# cleanup[3] wiping _collections
# cleanup[3] wiping itertools
# cleanup[3] wiping _operator
# cleanup[3] wiping readline
# cleanup[3] wiping os
# destroy posixpath
# cleanup[3] wiping genericpath
# cleanup[3] wiping _collections_abc
# cleanup[3] wiping stat
# cleanup[3] wiping _stat
# destroy _stat
# cleanup[3] wiping abc
# cleanup[3] wiping _abc
# cleanup[3] wiping encodings.utf_8
# cleanup[3] wiping encodings.aliases
# cleanup[3] wiping codecs
# cleanup[3] wiping _codecs
# cleanup[3] wiping posix
# cleanup[3] wiping marshal
# destroy marshal
# cleanup[3] wiping _io
# cleanup[3] wiping _weakref
# cleanup[3] wiping _warnings
# destroy _warnings
# cleanup[3] wiping _thread
# cleanup[3] wiping _imp
# destroy _imp
# cleanup[3] wiping _frozen_importlib
# cleanup[3] wiping sys
# cleanup[3] wiping builtins
# destroy readline
# destroy sys.monitoring
# destroy _io
# destroy re._parser
# destroy stat
# destroy genericpath
# destroy posix
# clear sys.meta_path
# clear sys.modules
# destroy _frozen_importlib
# destroy codecs
# destroy encodings.aliases
# destroy encodings.utf_8
# destroy _codecs
# destroy re
# destroy abc
# destroy os
# destroy _sre
# destroy _abc
# destroy _collections_abc
# destroy sys
# destroy _operator
# destroy _weakref
# destroy _collections
# destroy collections.abc
# destroy builtins
# destroy itertools
# destroy _functools
# destroy _thread
# clear sys.audit hooks
[?2004h]0;team@femmebabe: ~[01;32mteam@femmebabe[00m:[01;34m~[00m$ [?2004l
exit
